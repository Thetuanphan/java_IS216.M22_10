
drop table nhanvien;
drop table doitac;
drop table phieunhap;
drop table ctnsp;
drop table sanpham;
drop table cthd;
drop table loaisanpham;
drop table hoadon;
drop table khuyenmai; 
drop table khachhang;
drop table phieudv;
drop table ctdv;
drop table dichvu;
drop table taikhoan;

CREATE TABLE DOITAC
(
    MaDT  NUMBER(5) GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
    TenCTY VARCHAR2(100) NOT NULL,
    DiaChi varchar2(100) not null,
    SDT number not null,
    CONSTRAINT PK_MADT PRIMARY KEY(MaDT)
);


CREATE TABLE NHANVIEN
(
    MaNV  NUMBER(5) GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
    TenNV varchar2(40) not null,
    ChucVu varchar2(40) not null,
    GioiTinh varchar2(20) not null,
    NgaySinh date not null,
    DiaChi varchar2(40) not null,
    SDT number not null,
    NgayVaoLam date not null,
    CONSTRAINT PK_MANV PRIMARY KEY(MaNV)
);

CREATE TABLE KHACHHANG
(
    MaKH  NUMBER(5) GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
    TenKH varchar2(40) not null,
    GioiTinh varchar2(20) not null,
    Email varchar2(40) not null,
    SDT number not null,
    Diem number not null,
    Loai varchar2(20) not null,
    NgaySinh date not null,
    CONSTRAINT PK_MAKH PRIMARY KEY(MaKH)

);

CREATE TABLE HOADON
(
    MaHD  NUMBER(5) GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
    MaKH NUMBER,
    MaNV NUMBER not null,
    MaKM NUMBER,
    NgayTaoHD date not null,
    TongTien number not null,
    TienKM number,
    ThanhTien number not null,
    GhiChu varchar2(40),
    CONSTRAINT PK_MAHD PRIMARY KEY(MaHD)
);

CREATE TABLE CTHD
(
    MaHD NUMBER not null,
    MaSP NUMBER not null,
    SLSP number not null,
    CONSTRAINT PK_CTHD PRIMARY KEY(MaHD, MaSP)
);

CREATE TABLE LOAISANPHAM
(
    MaLSP  NUMBER(5) GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
    TenLSP varchar2(40) not null,
    CONSTRAINT PK_MALSP PRIMARY KEY(MaLSP)
);

CREATE TABLE SANPHAM
(
    MaSP  NUMBER(5) GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
    MaLSP NUMBER not null,
    TenSP varchar2(40) not null,
    SLTon number not null,
    DVT varchar2 (10) not null,
    DonGia number not null,
    CONSTRAINT PK_MASP PRIMARY KEY(MaSP)
);

CREATE TABLE DICHVU
(
    MaDV  NUMBER(5) GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
    TenDV varchar2(40) not null,
    TienDV number not null,
    CONSTRAINT PK_MADV PRIMARY KEY(MaDV)
);

CREATE TABLE PHIEUDV
(
    MaPDV  NUMBER(5) GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
    MaNV NUMBER not null,
    MaKH NUMBER,
    NgayTaoPDV date not null,
    TongSLDV number not null,
    TongTien number not null,
    TraTruoc number not null,
    ThanhTien number not null,
    CONSTRAINT PK_MAPDV PRIMARY KEY(MaPDV)
);

CREATE table CTDV
(
    MaPDV NUMBER not null,
    MaDV NUMBER not null,
    SLDV number not null,
    CONSTRAINT PK_CTDV PRIMARY KEY(MaPDV, MaDV)
);


CREATE TABLE TAIKHOAN
(
    MaNV   NUMBER(5),
    TenTK varchar2(40) not null,
    MatKhau varchar2(40) not null,
    CONSTRAINT PK_TK PRIMARY KEY(MaNV)
);

CREATE TABLE KHUYENMAI(
	MaKM  NUMBER(5) GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
	LoaiKM varchar2(40) not null,
	TyLeGiam number,
	TienGiam number,
    CONSTRAINT PK_KM PRIMARY KEY(MaKM)
);

CREATE TABLE PHIEUNHAP(
    MaPN  NUMBER(5) GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
    MaNV NUMBER not null,
    NgayTaoPN date not null,
    TongSLSP number not null,
    CONSTRAINT PK_MAPN PRIMARY KEY(MaPN)
);


CREATE TABLE CTNSP(
       MaPN NUMBER not null,
       MaSP NUMBER not null,
       MaDT NUMBER not null,
       SLNhap number not null,
       DonGiaNhap number not null,
       ThanhTien number not null,
       CONSTRAINT PK_CTNSP PRIMARY KEY(MaPN, MaSP)    
);


ALTER TABLE PHIEUDV
ADD CONSTRAINT FK_MAKH_PDV FOREIGN KEY (MaKH) REFERENCES KHACHHANG(MaKH);

ALTER TABLE PHIEUDV
ADD CONSTRAINT FK_MANV_PDV FOREIGN KEY (MaNV) REFERENCES NHANVIEN(MaNV);

ALTER TABLE CTNSP
ADD CONSTRAINT FK_MADT_CTN FOREIGN KEY (MaDT) REFERENCES DOITAC(MaDT);

ALTER TABLE CTNSP
ADD CONSTRAINT FK_MASP_CTN FOREIGN KEY (MaSP) REFERENCES SANPHAM(MaSP);

ALTER TABLE CTNSP
ADD CONSTRAINT FK_MAPN_CTN FOREIGN KEY (MaPN) REFERENCES PHIEUNHAP(MaPN);

ALTER TABLE PHIEUNHAP
ADD CONSTRAINT FK_MANV FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV);

ALTER TABLE SANPHAM
ADD CONSTRAINT FK_MALSP FOREIGN KEY (MaLSP) REFERENCES LOAISANPHAM(MaLSP);

ALTER TABLE HOADON
ADD CONSTRAINT FK_MANV_HD FOREIGN KEY (MaNV) REFERENCES NHANVIEN(MaNV);

ALTER TABLE HOADON
ADD CONSTRAINT FK_MAKH FOREIGN KEY (MaKH) REFERENCES KHACHHANG(MaKH);

ALTER TABLE HOADON
ADD CONSTRAINT FK_MAKM FOREIGN KEY (MaKM) REFERENCES KHUYENMAI(MaKM);

ALTER TABLE TAIKHOAN
ADD CONSTRAINT FK_MANV_TK FOREIGN KEY (MaNV) REFERENCES NHANVIEN(MaNV);

ALTER TABLE CTDV
ADD CONSTRAINT FK_MADV_CTDV FOREIGN KEY (MaDV) REFERENCES DICHVU(MaDV);

ALTER TABLE CTDV
ADD CONSTRAINT FK_MAPDV_CTDV FOREIGN KEY (MaPDV) REFERENCES PHIEUDV(MaPDV);

ALTER TABLE CTHD
ADD CONSTRAINT FK_MAHD_CTHD FOREIGN KEY (MaHD) REFERENCES HOADON(MaHD);

ALTER TABLE CTHD
ADD CONSTRAINT FK_MASP_CTHD FOREIGN KEY (MaSP) REFERENCES SANPHAM(MaSP);


---BANG DICHVU---
INSERT INTO DICHVU(tendv,TIENDV) VALUES('MUA VÀNG',5600000);
INSERT INTO DICHVU(tendv,TIENDV) VALUES('BÁN VÀNG',5650000);
INSERT INTO DICHVU(tendv,TIENDV) VALUES('S?A SIZE NH?N',100000);
INSERT INTO DICHVU(tendv,TIENDV) VALUES('HÀN DÂY CHUY?N',250000);
INSERT INTO DICHVU(tendv,TIENDV) VALUES('ÐÁNH BÓNG VANG',300000);



----BANG NHAN VIEN---
INSERT INTO NHANVIEN(tennv,CHUCVU,GIOITINH,NGAYSINH,DIACHI,SDT,NGAYVAOLAM) VALUES('NGUY?N TRÝ?NG PHÝÕNG LOAN','QL','N?',TO_DATE('1/5/1995','DD/MM/YYYY'),'TPHCM',0769482996,TO_DATE('07/1/2020','DD/MM/YYYY'));
INSERT INTO NHANVIEN(tennv,CHUCVU,GIOITINH,NGAYSINH,DIACHI,SDT,NGAYVAOLAM) VALUES('NGUY?N VÃN TOÀN','KT','NAM',TO_DATE('8/9/1993','DD/MM/YYYY'),'TPHCM',0392715034,TO_DATE('3/4/2018','DD/MM/YYYY'));
INSERT INTO NHANVIEN(tennv,CHUCVU,GIOITINH,NGAYSINH,DIACHI,SDT,NGAYVAOLAM) VALUES('?OÀN VÃN HÙNG','BH','N?',TO_DATE('03/12/1985','DD/MM/YYYY'),'TPHCM',0928593185,TO_DATE('30/06/2015','DD/MM/YYYY'));
INSERT INTO NHANVIEN(tennv,CHUCVU,GIOITINH,NGAYSINH,DIACHI,SDT,NGAYVAOLAM) VALUES('NGUY?N TH? HOÀI THÝÕNG','TN','N?',TO_DATE('17/8/1997','DD/MM/YYYY'),'TPHCM',0928493155,TO_DATE('9/10/2019','DD/MM/YYYY'));
INSERT INTO NHANVIEN(tennv,CHUCVU,GIOITINH,NGAYSINH,DIACHI,SDT,NGAYVAOLAM) VALUES('HOÀNG VÃN TÚ','QL','NAM',TO_DATE('14/05/1989','DD/MM/YYYY'),'TPHCM',0369275023,TO_DATE('19/01/2017','DD/MM/YYYY')); 
INSERT INTO NHANVIEN(tennv,CHUCVU,GIOITINH,NGAYSINH,DIACHI,SDT,NGAYVAOLAM) VALUES('NGUY?N MINH NH?T','TN','NAM',TO_DATE('15/3/1991','DD/MM/YYYY'),'TPHCM',0945237455,TO_DATE('7/1/2020','DD/MM/YYYY'));
INSERT INTO NHANVIEN(tennv,CHUCVU,GIOITINH,NGAYSINH,DIACHI,SDT,NGAYVAOLAM) VALUES('NGUY?N H?I QUÂN','QL','NAM',TO_DATE('24/2/1997','DD/MM/YYYY'),'TPHCM',0779880707,TO_DATE('20/5/2020','DD/MM/YYYY'));

----BANG KHACH HANG---

INSERT INTO KHACHHANG(TENKH,GIOITINH,EMAIL,SDT,DIEM,LOAI,NGAYSINH) VALUES('TR?N NG?C TU?N ANH','NAM','TRANNGOCTUANANH@GMAIL.COM',0768470225,108,'VIP',TO_DATE('10/02/1985','DD/MM/YYYY'));
INSERT INTO KHACHHANG(TENKH,GIOITINH,EMAIL,SDT,DIEM,LOAI,NGAYSINH) VALUES('TR?N KIM ANH', 'N?','TRANKIMANH@GMAIL.COM',0369837518,109,'VIP',TO_DATE('03/08/1980','DD/MM/YYYY'));
INSERT INTO KHACHHANG(TENKH,GIOITINH,EMAIL,SDT,DIEM,LOAI,NGAYSINH) VALUES('V? DUY H?I','NAM','VUDUYHAI@GMAIL.COM',0938597366,101,'VIP',TO_DATE('11/06/1987','DD/MM/YYYY'));
INSERT INTO KHACHHANG(TENKH,GIOITINH,EMAIL,SDT,DIEM,LOAI,NGAYSINH) VALUES('HÁN TH? KIM DUYÊN ','N?','HANTHIKIMDUYEN@GMAIL.COM',0975973356,103,'VIP',TO_DATE('16/05/1995','DD/MM/YYYY'));
INSERT INTO KHACHHANG(TENKH,GIOITINH,EMAIL,SDT,DIEM,LOAI,NGAYSINH) VALUES('TR?N KIM NG?C','N?','TRANKIMNGOC@GMAIL.COM',0709374592,67,'ThanThiet',TO_DATE('30/05/1995','DD/MM/YYYY'));
INSERT INTO KHACHHANG(TENKH,GIOITINH,EMAIL,SDT,DIEM,LOAI,NGAYSINH) VALUES('PH?M TH? NG?C NHÝ','N?','PHAMTHINGOCNHU@GMAIL.COM',0747397367,109,'VIP',TO_DATE('14/10/1998','DD/MM/YYYY'));
INSERT INTO KHACHHANG(TENKH,GIOITINH,EMAIL,SDT,DIEM,LOAI,NGAYSINH) VALUES('NGUY?N HOÀNG TÚ','N?','NGUYENHOANGTU@GMAIL.COM',0947962356,108,'VIP',TO_DATE('12/04/1979','DD/MM/YYYY'));
INSERT INTO KHACHHANG(TENKH,GIOITINH,EMAIL,SDT,DIEM,LOAI,NGAYSINH) VALUES('HU?NH THU TUY?T','N?','HUYNHTHUTUYET@GMAIL.COM',0915743268,10,'M?i',TO_DATE('17/07/1974','DD/MM/YYYY'));
INSERT INTO KHACHHANG(TENKH,GIOITINH,EMAIL,SDT,DIEM,LOAI,NGAYSINH) VALUES('HOÀNG MINH TU?N','NAM','HOANGMINHTUAN@GMAIL.COM',0938571923,9,'M?i',TO_DATE('08/01/2000','DD/MM/YYYY'));
INSERT INTO KHACHHANG(TENKH,GIOITINH,EMAIL,SDT,DIEM,LOAI,NGAYSINH) VALUES('ÐOÀN T?N TRUNG','NAM','DOANTANTRUNG@GMAIL.COM',0369485285,109,'VIP',TO_DATE('20/10/1984','DD/MM/YYYY'));




--- BANG DOI TAC
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('T?p ðoàn DOJI','T?a nhà DOJI Tower, 5 Lê Du?n, Q. Ba Ð?nh, Hà N?i',18001168);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('Công ty c? ph?n Vàng b?c ðá qu? Phú Nhu?n (PNJ)','170E Phan Ðãng Lýu, P. 3, Q. Phú Nhu?n, TP. HCM',1800545457);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('Công ty TNHH MTV Vàng b?c ðá qu? Sài G?n (SJC)','418 - 420 Nguy?n Th? Minh Khai, P. 5, Q. 3, TP. HCM',02839293388);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('Công ty Vàng b?c ðá qu? Sacombank (SBJ)','278 Nam KyÌ KhõÒi NghiÞa, PhýõÌng 8, Quâòn 3, TP. HCM',0909543466);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('Công ty Vàng b?c Ðá qu? B?o Tín Minh Châu','29 Tr?n Nhân Tông, Hai Bà Trýng, Hà N?i',1800585899);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('Công ty TNHH Vàng b?c ðá qu? H? Long ( HJC)','8 Hàng B?c, Hoàn Ki?m, Hà N?i',0911519466);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('T?p ðoàn Vàng b?c ðá qu? Phú Qu?','30 Tr?n Nhân Tông, Q. Hai Bà Trýng, Hà N?i',0906263030);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('Công ty C? ph?n Th? Gi?i Kim Cýõng','59 Ðý?ng 27, Phý?ng 6, Q. G? V?p, TP. HCM',1800779999);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('Thýõng hi?u Ngoc Tham Jewelry ( NTJ)','25/2 Nguy?n Hu?nh Ð?c, P.8, Tp.M? Tho, Ti?n Giang',1800599973);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('Thýõng hi?u V?nh Cara - Diamond Jewelry','406 V? Vãn T?n, P.5, Q.3, Tp.HCM',02838181111);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('Thýõng hi?u C?u Long Jewelry','70-72 Lê Thánh Tôn, Qu?n 1, TP. H? Chí Minh, Vi?t Nam',0932106439);
INSERT INTO DOITAC(tencty,DIACHI,SDT) VALUES('Thýõng hi?u Ðá Qúy','12/6 Lê L?i, Qu?n 5, TP. H? Chí Minh, Vi?t Nam',0954266439);




---BANG KHUYEN MAI
INSERT INTO KHUYENMAI(loaikm,TYLEGIAM,TIENGIAM) VALUES('KM TRONG NGÀY',10, 200000);
INSERT INTO KHUYENMAI(loaikm,TYLEGIAM,TIENGIAM) VALUES('KM S?N PH?M',20, 100000);
INSERT INTO KHUYENMAI(loaikm,TYLEGIAM,TIENGIAM) VALUES('KM SINH NH?T',30, 500000);
INSERT INTO KHUYENMAI(loaikm,TYLEGIAM,TIENGIAM) VALUES('KM MÙA D?CH',20, 300000);
INSERT INTO KHUYENMAI(loaikm,TYLEGIAM,TIENGIAM) VALUES('KM NGÀY QU?C T? PH? N?',30, 500000);
INSERT INTO KHUYENMAI(loaikm,TYLEGIAM,TIENGIAM) VALUES('KM NGÀY PH? N? VN',30, 500000);
INSERT INTO KHUYENMAI(loaikm,TYLEGIAM,TIENGIAM) VALUES('KM BLACK FRIDAY',30, 1000000);


--- BANG PHIEUNHAPSP

INSERT INTO PHIEUNHAP(manv,NGAYTAOPN,TONGSLSP) VALUES(1, TO_DATE('1/6/2021','DD/MM/YYYY'),12);
INSERT INTO PHIEUNHAP(manv,NGAYTAOPN,TONGSLSP) VALUES(2, TO_DATE('2/6/2021','DD/MM/YYYY'),14);
INSERT INTO PHIEUNHAP(manv,NGAYTAOPN,TONGSLSP) VALUES(3, TO_DATE('3/6/2021','DD/MM/YYYY'),19);
INSERT INTO PHIEUNHAP(manv,NGAYTAOPN,TONGSLSP) VALUES(4, TO_DATE('4/6/2021','DD/MM/YYYY'),10);
INSERT INTO PHIEUNHAP(manv,NGAYTAOPN,TONGSLSP) VALUES(5,TO_DATE('5/6/2021','DD/MM/YYYY'),9);




----BANG PHIEUDV-----
INSERT INTO PHIEUDV(manv,MAKH,NGAYTAOPDV,TONGSLDV,TONGTIEN,TRATRUOC,THANHTIEN) VALUES ( 1, 1, TO_DATE('11/02/2021','DD/MM/YYYY'), 1, 5600000, 3600000, 2000000);
INSERT INTO PHIEUDV(manv,MAKH,NGAYTAOPDV,TONGSLDV,TONGTIEN,TRATRUOC,THANHTIEN) VALUES ( 2, 2, TO_DATE('11/02/2021','DD/MM/YYYY'), 1, 5650000, 5000000, 650000);
INSERT INTO PHIEUDV(manv,MAKH,NGAYTAOPDV,TONGSLDV,TONGTIEN,TRATRUOC,THANHTIEN) VALUES ( 3, 3, TO_DATE('11/02/2021','DD/MM/YYYY'), 1, 100000, 100000, 0);
INSERT INTO PHIEUDV(manv,MAKH,NGAYTAOPDV,TONGSLDV,TONGTIEN,TRATRUOC,THANHTIEN) VALUES ( 4, 4, TO_DATE('11/02/2021','DD/MM/YYYY'), 1, 250000, 250000, 0);
INSERT INTO PHIEUDV(manv,MAKH,NGAYTAOPDV,TONGSLDV,TONGTIEN,TRATRUOC,THANHTIEN) VALUES ( 5, 5, TO_DATE('11/02/2021','DD/MM/YYYY'), 1, 300000, 300000, 0);





-- BANG HOADON---------
INSERT INTO HOADON(MaKH,MaNV,MaKM,NGAYTAOHD,TONGTIEN,TienKM,THANHTIEN,GHICHU)VALUES(1,1,2,TO_DATE('01/05/2020','DD/MM/YYYY'),15800000,500000,15300000,'NO');
INSERT INTO HOADON(MaKH,MaNV,MaKM,NGAYTAOHD,TONGTIEN,TienKM,THANHTIEN,GHICHU)VALUES(2,3,2,TO_DATE('01/05/2020','DD/MM/YYYY'),10200000,200000,10000000,'NO');
INSERT INTO HOADON(MaKH,MaNV,MaKM,NGAYTAOHD,TONGTIEN,TienKM,THANHTIEN,GHICHU)VALUES(2,1,2,TO_DATE('01/05/2020','DD/MM/YYYY'),18000000,500000,17500000,'NO');
INSERT INTO HOADON(MaKH,MaNV,MaKM,NGAYTAOHD,TONGTIEN,TienKM,THANHTIEN,GHICHU)VALUES(4,3,5,TO_DATE('23/05/2020','DD/MM/YYYY'),20000000,500000,19500000,'NO');
INSERT INTO HOADON(MaKH,MaNV,MaKM,NGAYTAOHD,TONGTIEN,TienKM,THANHTIEN,GHICHU)VALUES(5,1,6,TO_DATE('30/05/2020','DD/MM/YYYY'),8000000,200000,7800000,'NO');





----BANG TAIKHOAN---
INSERT INTO TAIKHOAN(MANV, matkhau,TENTK) VALUES (1, '123', 'NV01');
INSERT INTO TAIKHOAN(MANV, matkhau,TENTK) VALUES (2, '123', 'NV02');
INSERT INTO TAIKHOAN(MANV, matkhau,TENTK) VALUES (3, '456', 'NV03');
INSERT INTO TAIKHOAN(MANV, matkhau,TENTK) VALUES (4, '129', 'NV04');
INSERT INTO TAIKHOAN(MANV, matkhau,TENTK) VALUES (5,'124', 'NV05');
INSERT INTO TAIKHOAN(MANV, matkhau,TENTK) VALUES (6, '154', 'NV06');
INSERT INTO TAIKHOAN(MANV, matkhau,TENTK) VALUES (7, '113', 'NV07');


--BANG LOAISANPHAM
INSERT INTO LOAISANPHAM(tenlsp) VALUES ('NH?N');
INSERT INTO LOAISANPHAM(tenlsp) VALUES ('DÂY CHUY?N');
INSERT INTO LOAISANPHAM(tenlsp) VALUES ('L?C TAY');
INSERT INTO LOAISANPHAM(tenlsp) VALUES ('BÔNG TAI');
INSERT INTO LOAISANPHAM(tenlsp) VALUES ('V?NG C?');

-- BANG SAN PHAM
INSERT INTO SANPHAM(malsp,TENSP,SLTON,DVT,DONGIA) VALUES(3,'L?C TAY HOA CÚC',20, 'CÁI',2900000);
INSERT INTO SANPHAM(malsp,TENSP,SLTON,DVT,DONGIA) VALUES(1,'NH?N N?',20, 'CÁI',3000000);
INSERT INTO SANPHAM(malsp,TENSP,SLTON,DVT,DONGIA) VALUES(1,'NH?N NAM',20, 'CÁI',3000000);
INSERT INTO SANPHAM(malsp,TENSP,SLTON,DVT,DONGIA) VALUES(1,'NH?N CÝ?I',20, 'CÁI',5000000);
INSERT INTO SANPHAM(malsp,TENSP,SLTON,DVT,DONGIA) VALUES(3,'L?C TAY N?',20, 'CÁI',4000000);
INSERT INTO SANPHAM(malsp,TENSP,SLTON,DVT,DONGIA) VALUES(3,'L?C TAY NAM',20, 'CÁI',4000000);
INSERT INTO SANPHAM (malsp,TENSP,SLTON,DVT,DONGIA)VALUES(2,'DÂY CHUY?N M?NH',20, 'CÁI',4590000);
INSERT INTO SANPHAM (malsp,TENSP,SLTON,DVT,DONGIA)VALUES(2,'M?T D Y CHUY?N TRÁI TIM',20, 'CÁI',2500000);
INSERT INTO SANPHAM(malsp,TENSP,SLTON,DVT,DONGIA) VALUES(5,'KI?NG',20, 'CÁI',4600000);
INSERT INTO SANPHAM(malsp,TENSP,SLTON,DVT,DONGIA) VALUES(1,'NH?N',20, 'CÁI',2600000);

--- BANG CHITIETNSP
INSERT INTO CTNSP VALUES(1,1,1,10,2700000, 0);
INSERT INTO CTNSP VALUES(2,2,2,5,30000000,0);
INSERT INTO CTNSP VALUES(3,3,3,3,3500000,0);
INSERT INTO CTNSP VALUES(4,4,4,15,2000000,0);
INSERT INTO CTNSP VALUES(5,5,5,8,4000000,0);

--- BANG CHITIETDV
INSERT INTO CTDV VALUES(1,1,2);
INSERT INTO CTDV VALUES(2,2,6);
INSERT INTO CTDV VALUES(3,3,3);
INSERT INTO CTDV VALUES(4,4,4);
INSERT INTO CTDV VALUES(5,5,2);

--- BANG CTHD------
INSERT INTO CTHD VALUES(1,1,3);
INSERT INTO CTHD VALUES(2,2,11);
INSERT INTO CTHD VALUES(3,3,5);
INSERT INTO CTHD VALUES(4,4,6);
INSERT INTO CTHD VALUES(5,5,8);


commit;

CREATE OR REPLACE TRIGGER TRIGGER_CUS_REVENUE_increased
AFTER INSERT OR UPDATE OR DELETE ON HOADON
FOR EACH ROW
BEGIN
    IF(INSERTING) THEN
        UPDATE KHACHHANG
        SET DIEM = (DIEM + :NEW.THANHTIEN)
        WHERE MAKH = :new.MAKH;
    END IF; 
    IF(UPDATING) THEN
        UPDATE KHACHHANG
        SET DIEM = (DIEM + (:NEW.THANHTIEN - :old.THANHTIEN))
        WHERE MAKH = :new.MAKH;
    END IF; 
    IF(DELETING) THEN
        UPDATE KHACHHANG
        SET DIEM = (DIEM - :old.THANHTIEN)
        WHERE MAKH = :old.MAKH;   
    END IF;  
END;

VIP", "Thân Thi?t", "Ti?m Nãng", "M?i
CREATE OR REPLACE TRIGGER TRIGGER_CUS_TYPE_OLD
BEFORE UPDATE ON KHACHHANG
FOR EACH ROW
BEGIN  
    IF (:new.DIEM <= 5000000)
    THEN
        :new.LOAI := 'M?i';
    END IF;
    IF (:new.DIEM > 5000000 and :new.DIEM <= 15000000)
    THEN
        :new.LOAI := 'Ti?m Nãng';
    END IF;
    IF (:new.DIEM > 15000000 and :new.DIEM <= 30000000)
    THEN
        :new.LOAI := 'Ti?m Nãng';
    END IF;
    IF (:new.DIEM > 30000000)
    THEN
        :new.LOAI := 'Thân Thi?t';
    END IF;
END;